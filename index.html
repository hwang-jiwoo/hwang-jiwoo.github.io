<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>HWANG JIWOO | Personal website</title>
    <meta content="Hwang Jiwoo | Personal Website" name="title">
    <meta content="KNU,kangwon,research,phd,hci,hwang jiwoo,jiwoo hwang" name="keywords">
    <meta content="Hwang Jiwoo" name="author">
    <meta content="A personal website for Hwang Jiwoo" name="description">
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <!-- (필요시) 기존 의존성 유지 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://unpkg.com/popper.js/dist/umd/popper.min.js"></script>
    <script crossorigin="anonymous" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script src="./js/custom.js" type="text/javascript"></script>
    <script src="./js/publication.js" type="text/javascript"></script>

    <style>
        body {
            background: #f8f9fa;
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            color: #222;
        }
        .navbar {
            background: #2d3e50;
            color: #fff;
            padding: 1rem 0;
        }
        .navbar .navbar-brand {
            color: #003366;
            font-weight: bold;
            font-size: 1.5rem;
            text-decoration: none;
        }
        .navbar-nav {
            list-style: none;
            padding-left: 0;
            margin: 0;
            display: flex;
            justify-content: flex-end;
        }
        .navbar-nav .nav-item { margin-left: 1.5rem; }
        .navbar-nav .nav-link {
            color: #003366;
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            transition: color 0.2s;
        }
        .navbar-nav .nav-link:hover { color: #ffd700; }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            padding: 2rem;
        }
        h1 { font-size: 2.2rem; font-weight: bold; margin-bottom: 1rem; }

        .ui-labels a {
            display: inline-block; background: #0077cc; color: #fff;
            padding: 0.4em 1em; border-radius: 20px; text-decoration: none;
            margin: 0.3em 0.5em 0.3em 0; font-size: 1rem; transition: background 0.2s;
        }
        .ui-labels a:hover { background: #005fa3; }
        .blockquote-footer { font-size: 0.95rem; color: #888; }

        @media (max-width: 600px) {
            .container { padding: 1rem; }
            h1 { font-size: 1.5rem; }
        }

        /* ===== SPA & Publications ===== */
        .page { display: none; }
        .page.active { display: block; }

        /* 필터 영역 */
        .pub-filters {
            display:flex; gap:10px; align-items:center; flex-wrap:wrap;
            margin: 0 0 12px 0;
        }
        .pub-input, .pub-btn, .pub-chip {
            background:#f3f6fb; border:1px solid #d9e2ef; color:#102a43;
            padding:8px 10px; border-radius:10px; font-size:14px;
        }
        .pub-btn { cursor:pointer; }
        .pub-chip { display:inline-flex; gap:6px; align-items:center; cursor:pointer; user-select:none; }
        .pub-chip input { margin:0; }
        .pub-fine { color:#66788a; font-size:13px; }

        /* 연도 그룹 & 항목 */
        .pub-year { margin:18px 0 6px; font-size:20px; font-weight:700; color:#183a5d; }
        .pub-list { list-style:none; padding-left:0; margin:0 0 10px 0; }
        .pub-item { margin: 10px 0; line-height:1.55; }
        .pub-title { font-weight:600; }
        .pub-venue { font-style:italic; }
        .pub-type-badge {
            display:inline-block; margin-left:6px; font-size:11px;
            padding:2px 6px; border-radius:999px; background:#eef4ff; color:#275efe; border:1px solid #dbe6ff;
        }
    </style>
</head>
<body>
    <div class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container" style="background:none; box-shadow:none; padding:0; max-width:none;">
            <a class="navbar-brand" href="#about">Hwang Jiwoo</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="#publications">Publications</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div class="container mt-5 page active" id="menu_home">
        <div class="bs-docs-section">
            <div class="meny_template">
                <div class="row">
                    <div class="col-md-12">
                        <h1 id="about">ABOUT</h1>
                        <p>
                            I am a Ph.D. student in the Graduate School of Data Science at Kangwon National University.
                            I received my B.S. and M.S. degrees in Computer Science and Engineering from Kangwon National University.
                            My research interests include various aspects of Human-Computer Interaction (HCI).
                        </p>
                        <br>
                        <div class="ui-labels">
                            <a class="ui-labels" href="https://scholar.google.co.kr/citations?hl=en&user=g8tiXdMAAAAJ" target="_blank">Google Scholar</a>
                        </div>
                        <blockquote class="blockquote text-right">
                            <p class="mb-0"></p>
                            <footer class="blockquote-footer">Updated 1 Aug, 2025</footer>
                        </blockquote>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Publications Page -->
    <div class="container mt-5 page" id="menu_publications">
        <div class="bs-docs-section">
            <div class="meny_template">
                <h1 id="publications">Publications</h1>

                <!-- 필터: [시작]-[종료] 연도, Type 체크 -->
                <div class="pub-filters" aria-label="Publications Filters">
                    <input id="yearStart" class="pub-input" type="number" placeholder="Start" inputmode="numeric" min="1900" max="2100" />
                    <span class="pub-fine">–</span>
                    <input id="yearEnd" class="pub-input" type="number" placeholder="End" inputmode="numeric" min="1900" max="2100" />
                    <label class="pub-chip"><input id="typeJournal" type="checkbox" checked> Journal</label>
                    <label class="pub-chip"><input id="typeConference" type="checkbox" checked> Conference</label>
                    <button id="applyFilters" class="pub-btn">Apply</button>
                    <button id="clearFilters" class="pub-btn">Clear</button>
                </div>

                <!-- 연도별 그룹 렌더 영역 -->
                <div id="pubGroups"></div>
            </div>
        </div>
    </div>

    <!-- ===== SPA Router + Publications Loader/Renderer ===== -->
    <script>
      /* ---------- SPA Router ---------- */
      const PAGES = {
        about: 'menu_home',
        publications: 'menu_publications'
      };
      function showPageByHash() {
        const hash = (location.hash || '#about').replace('#','');
        const targetId = PAGES[hash] || PAGES.about;

        document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
        document.getElementById(targetId).classList.add('active');

        // 네비게이션 active 상태 (선택사항)
        document.querySelectorAll('.navbar .nav-link').forEach(a=>{
          const h = a.getAttribute('href').replace('#','');
          a.classList.toggle('active', h === hash);
        });
      }
      window.addEventListener('hashchange', showPageByHash);
      window.addEventListener('DOMContentLoaded', showPageByHash);

      /* ---------- CSV/TSV Parser (조용히 실패) ---------- */
      function detectDelimiter(text) {
        const firstLine = text.split(/\r?\n/).find(l=>l.trim().length>0) || '';
        const commaCount = (firstLine.match(/,/g)||[]).length;
        const tabCount   = (firstLine.match(/\t/g)||[]).length;
        return tabCount > commaCount ? '\t' : ',';
      }
      function parseDelimited(text, delimiter) {
        const rows = [];
        let i=0, field='', row=[], inQuotes=false, d=delimiter;
        while(i<text.length){
          const ch=text[i];
          if(ch === '"'){
            if(inQuotes && text[i+1] === '"'){ field+='"'; i+=2; continue; }
            inQuotes=!inQuotes; i++; continue;
          }
          if(!inQuotes && ch===d){ row.push(field); field=''; i++; continue; }
          if(!inQuotes && ch==='\n'){ row.push(field); rows.push(row); row=[]; field=''; i++; continue; }
          if(!inQuotes && ch==='\r'){ i++; continue; }
          field+=ch; i++;
        }
        if(field.length || row.length){ row.push(field); rows.push(row); }
        return rows.filter(r => r.some(c => (c||'').trim().length));
      }
      function parseTable(text) {
        const delim = detectDelimiter(text);
        const rows = parseDelimited(text, delim);
        if(!rows.length) return { headers:[], data:[] };
        const headers = rows[0].map(h => (h||'').trim());
        const data = rows.slice(1).map(r => {
          const obj = {};
          headers.forEach((h, idx) => obj[h] = (r[idx] ?? '').trim());
          return obj;
        });
        return { headers, data };
      }

      /* ---------- Publications State & Render ---------- */
      const PUB = { raw: [], filtered: [], years: {min:null, max:null} };

      function normalizeRows(rows){
        return rows.map(r => ({
          Types: r.Types,
          Years: (r.Years||'').replace(/[^\d]/g,''),
          Title: r.Title,
          Information: r.Information,
          Authors: r.Authors
        })).filter(r => r.Title && r.Years);
      }

      function computeYearRange(list){
        const ys = list.map(r => parseInt(r.Years,10)).filter(n => !isNaN(n));
        if(!ys.length) return {min:null, max:null};
        return { min: Math.min(...ys), max: Math.max(...ys) };
      }

      function applyFilters(){
        const start = parseInt(document.getElementById('yearStart').value, 10);
        const end   = parseInt(document.getElementById('yearEnd').value, 10);
        const wantJournal = document.getElementById('typeJournal').checked;
        const wantConf    = document.getElementById('typeConference').checked;

        PUB.filtered = PUB.raw.filter(it=>{
          const y = parseInt(it.Years,10);
          if(!isNaN(start) && y < start) return false;
          if(!isNaN(end) && y > end) return false;
          if(!wantJournal && it.Types === 'Journal') return false;
          if(!wantConf && it.Types === 'Conference') return false;
          return true;
        });
        renderGroups();
      }

      function clearFilters(){
        document.getElementById('yearStart').value = '';
        document.getElementById('yearEnd').value = '';
        document.getElementById('typeJournal').checked = true;
        document.getElementById('typeConference').checked = true;
        PUB.filtered = [...PUB.raw];
        renderGroups();
      }

      function renderGroups(){
        const wrap = document.getElementById('pubGroups');
        wrap.innerHTML = '';

        // 연도 desc로 그룹핑
        const byYear = {};
        for(const r of PUB.filtered){
          (byYear[r.Years] = byYear[r.Years] || []).push(r);
        }
        const years = Object.keys(byYear).sort((a,b)=>parseInt(b)-parseInt(a));

        for(const y of years){
          const h = document.createElement('div');
          h.className = 'pub-year';
          h.textContent = y;

          const ul = document.createElement('ul');
          ul.className = 'pub-list';

          for(const it of byYear[y]){
            const li = document.createElement('li');
            li.className = 'pub-item';
            li.innerHTML = `
              ${escapeHTML(it.Authors)}.
              <span class="pub-title">“${escapeHTML(it.Title)}.”</span>
              <span class="pub-venue">${escapeHTML(it.Information)}</span>
              <span class="pub-type-badge">${escapeHTML(it.Types)}</span>
            `;
            ul.appendChild(li);
          }

          wrap.appendChild(h);
          wrap.appendChild(ul);
        }
      }

      function escapeHTML(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

      async function initPublications(){
        try{
          const res = await fetch('publications.csv', { cache:'no-store' });
          if(!res.ok) return; // 조용히 실패
          const text = await res.text();
          const { headers, data } = parseTable(text);

          // 필수 헤더 확인 (없어도 조용히 무시)
          const needed = ['Types','Years','Title','Information','Authors'];
          if(!needed.every(h => headers.includes(h))) return;

          PUB.raw = normalizeRows(data);
          PUB.filtered = [...PUB.raw];
          PUB.years = computeYearRange(PUB.raw);

          // 연도 입력 기본값 힌트 설정(placeholder)
          const ys = document.getElementById('yearStart');
          const ye = document.getElementById('yearEnd');
          if(PUB.years.min) ys.placeholder = PUB.years.min;
          if(PUB.years.max) ye.placeholder = PUB.years.max;

          renderGroups();
        }catch(e){
          // 조용히 무시
        }
      }

      function bindFilterUI(){
        document.getElementById('applyFilters').addEventListener('click', applyFilters);
        document.getElementById('clearFilters').addEventListener('click', clearFilters);

        // Enter 키로 바로 적용
        ['yearStart','yearEnd'].forEach(id=>{
          document.getElementById(id).addEventListener('keydown', (e)=>{
            if(e.key === 'Enter') applyFilters();
          });
        });

        // Type 체크 변경 시 즉시 적용
        document.getElementById('typeJournal').addEventListener('change', applyFilters);
        document.getElementById('typeConference').addEventListener('change', applyFilters);
      }

      window.addEventListener('DOMContentLoaded', ()=>{
        bindFilterUI();
        initPublications();
      });
    </script>
</body>
</html>
